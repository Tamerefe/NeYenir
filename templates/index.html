{% extends "base.html" %}

{% block title %}Ana Sayfa - Ne Yenir?{% endblock %}

{% block content %}
<!-- Modern Hero Section -->
<section class="modern-hero-section">
    <div class="hero-background">
        <div class="hero-gradient"></div>
        <div class="hero-pattern"></div>
    </div>

    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 hero-content">
                <div class="hero-badge mb-4">
                    <span><i class="bi bi-stars"></i> AI Destekli Akƒ±llƒ± E≈üle≈ütirme</span>
                </div>

                <h1 class="modern-hero-title mb-4">
                    Tadƒ±n Yanƒ±nda
                    <span class="gradient-text">Keyfin Zirvesinde</span>
                    Bir Uyum
                </h1>

                <p class="modern-hero-subtitle mb-5">
                    AI teknolojisi ve gurme uzmanlarƒ±nƒ±n deneyimiyle, her yemeƒüiniz i√ßin ideal i√ßecek
                    √∂nerileri alƒ±n. Lezzet deneyiminizi <strong>maksimize</strong> edin!
                </p>

                <div class="hero-actions mb-5">
                    <a href="{{ url_for('main.recommend') }}" class="btn modern-btn-hero primary">
                        <i class="bi bi-lightbulb-fill"></i>
                        <span>√ñneri Al</span>
                        <i class="bi bi-arrow-right"></i>
                    </a>
                    {% if not session.user_id %}
                    <a href="{{ url_for('main.create_profile') }}" class="btn modern-btn-hero secondary">
                        <i class="bi bi-person-plus-fill"></i>
                        <span>Profil Olu≈ütur</span>
                    </a>
                    {% endif %}
                </div>

                <!-- Trust Indicators -->
                <div class="hero-trust">
                    <div class="trust-item">
                        <i class="bi bi-shield-fill-check"></i>
                        <span>G√ºvenilir AI</span>
                    </div>
                    <div class="trust-divider"></div>
                    <div class="trust-item">
                        <i class="bi bi-people-fill"></i>
                        <span>1000+ Kullanƒ±cƒ±</span>
                    </div>
                    <div class="trust-divider"></div>
                    <div class="trust-item">
                        <i class="bi bi-star-fill"></i>
                        <span>%98 Memnuniyet</span>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 hero-visual">
                <div class="hero-card-stack">
                    <div class="floating-card card-1">
                        <div class="card-icon">üç∑</div>
                        <div class="card-content">
                            <div class="card-label">AI √ñneri</div>
                            <div class="card-value">%95 Uyum</div>
                        </div>
                    </div>
                    <div class="floating-card card-2">
                        <div class="card-icon">üçΩÔ∏è</div>
                        <div class="card-content">
                            <div class="card-label">Yemek T√ºr√º</div>
                            <div class="card-value">{{ foods|length }}+</div>
                        </div>
                    </div>
                    <div class="floating-card card-3">
                        <div class="card-icon">‚≠ê</div>
                        <div class="card-content">
                            <div class="card-label">Ortalama Skor</div>
                            <div class="card-value">4.8/5.0</div>
                        </div>
                    </div>
                    <div class="hero-circle-large"></div>
                    <div class="hero-circle-small"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Live Stats Section -->
<section class="live-stats-section">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-card-modern" data-animate="counter">
                <div class="stat-icon-wrapper purple">
                    <i class="bi bi-egg-fill"></i>
                </div>
                <div class="stat-number" data-target="{{ foods|length }}">0</div>
                <div class="stat-label">Yemek √áe≈üidi</div>
                <div class="stat-growth">
                    <i class="bi bi-arrow-up-short"></i>
                    <span>+12% bu ay</span>
                </div>
            </div>

            <div class="stat-card-modern" data-animate="counter">
                <div class="stat-icon-wrapper orange">
                    <i class="bi bi-cup-fill"></i>
                </div>
                <div class="stat-number" data-target="{{ alcohols|length }}">0</div>
                <div class="stat-label">ƒ∞√ßecek Se√ßeneƒüi</div>
                <div class="stat-growth">
                    <i class="bi bi-arrow-up-short"></i>
                    <span>+8% bu ay</span>
                </div>
            </div>

            <div class="stat-card-modern" data-animate="counter">
                <div class="stat-icon-wrapper green">
                    <i class="bi bi-robot"></i>
                </div>
                <div class="stat-number" data-target="1247">0</div>
                <div class="stat-label">AI √ñnerisi Verildi</div>
                <div class="stat-growth">
                    <i class="bi bi-arrow-up-short"></i>
                    <span>+24% bu ay</span>
                </div>
            </div>

            <div class="stat-card-modern" data-animate="counter">
                <div class="stat-icon-wrapper cyan">
                    <i class="bi bi-star-fill"></i>
                </div>
                <div class="stat-number" data-target="98" data-suffix="%">0</div>
                <div class="stat-label">Kullanƒ±cƒ± Memnuniyeti</div>
                <div class="stat-growth success">
                    <i class="bi bi-check-circle-fill"></i>
                    <span>M√ºkemmel</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Modern Features Section -->
<section class="modern-features-section">
    <div class="container">
        <div class="section-header-modern text-center mb-5">
            <div class="section-badge">
                <i class="bi bi-lightning-charge-fill"></i>
                <span>√ñzellikler</span>
            </div>
            <h2 class="section-title-modern">Neden <span class="gradient-text">Ne Yenir?</span></h2>
            <p class="section-subtitle-modern">
                Yemek-i√ßecek e≈üle≈ütirmesini bir sonraki seviyeye ta≈üƒ±yan √∂zelliklerimizi ke≈üfedin
            </p>
        </div>

        <div class="features-grid">
            <!-- Feature 1: AI Powered -->
            <div class="feature-card-modern">
                <div class="feature-icon-modern gradient-purple">
                    <i class="bi bi-robot"></i>
                    <div class="icon-glow"></div>
                </div>
                <h3 class="feature-title-modern">AI Destekli E≈üle≈ütirme</h3>
                <p class="feature-desc-modern">
                    Geli≈ümi≈ü makine √∂ƒürenmesi algoritmalarƒ± lezzet profillerini analiz ederek
                    %95 doƒüruluk oranƒ±yla m√ºkemmel e≈üle≈ütirmeler sunar.
                </p>
                <div class="feature-stats">
                    <div class="feature-stat-item">
                        <i class="bi bi-check-circle-fill"></i>
                        <span>Akƒ±llƒ± Analiz</span>
                    </div>
                    <div class="feature-stat-item">
                        <i class="bi bi-check-circle-fill"></i>
                        <span>Ger√ßek Zamanlƒ±</span>
                    </div>
                </div>
            </div>

            <!-- Feature 2: Expert Recommendations -->
            <div class="feature-card-modern">
                <div class="feature-icon-modern gradient-orange">
                    <i class="bi bi-award-fill"></i>
                    <div class="icon-glow"></div>
                </div>
                <h3 class="feature-title-modern">Gurme Uzman √ñnerileri</h3>
                <p class="feature-desc-modern">
                    D√ºnya √ßapƒ±nda √ºnl√º ≈üefler ve sommelierlarƒ±n √∂zel √∂nerileriyle
                    deneyiminizi zenginle≈ütirin.
                </p>
                <div class="feature-stats">
                    <div class="feature-stat-item">
                        <i class="bi bi-people-fill"></i>
                        <span>12+ Uzman</span>
                    </div>
                    <div class="feature-stat-item">
                        <i class="bi bi-globe"></i>
                        <span>8 Mutfak</span>
                    </div>
                </div>
            </div>

            <!-- Feature 3: Personalized Learning -->
            <div class="feature-card-modern">
                <div class="feature-icon-modern gradient-green">
                    <i class="bi bi-graph-up-arrow"></i>
                    <div class="icon-glow"></div>
                </div>
                <h3 class="feature-title-modern">Ki≈üiselle≈ütirilmi≈ü √ñƒürenme</h3>
                <p class="feature-desc-modern">
                    Tercihlerinizden √∂ƒürenen sistem, her √∂nerisiyle size √∂zel
                    deneyimler sunmaya devam eder.
                </p>
                <div class="feature-stats">
                    <div class="feature-stat-item">
                        <i class="bi bi-trophy-fill"></i>
                        <span>Akƒ±llƒ± Profil</span>
                    </div>
                    <div class="feature-stat-item">
                        <i class="bi bi-star-fill"></i>
                        <span>Otomatik ƒ∞yile≈üme</span>
                    </div>
                </div>
            </div>

            <!-- Feature 4: Global Database -->
            <div class="feature-card-modern">
                <div class="feature-icon-modern gradient-cyan">
                    <i class="bi bi-globe2"></i>
                    <div class="icon-glow"></div>
                </div>
                <h3 class="feature-title-modern">Geni≈ü Yemek Veritabanƒ±</h3>
                <p class="feature-desc-modern">
                    T√ºrk mutfaƒüƒ±ndan Fransƒ±z gastronomisine, Japon sushisinden
                    ƒ∞talyan pastalarƒ±na kadar geni≈ü se√ßenek yelpazesi.
                </p>
                <div class="feature-stats">
                    <div class="feature-stat-item">
                        <i class="bi bi-flag-fill"></i>
                        <span>12+ √úlke</span>
                    </div>
                    <div class="feature-stat-item">
                        <i class="bi bi-cup-fill"></i>
                        <span>50+ ƒ∞√ßecek</span>
                    </div>
                </div>
            </div>

            <!-- Feature 5: Cocktail Suggestions -->
            <div class="feature-card-modern">
                <div class="feature-icon-modern gradient-pink">
                    <i class="bi bi-cup-straw"></i>
                    <div class="icon-glow"></div>
                </div>
                <h3 class="feature-title-modern">Kokteyl √ñnerileri</h3>
                <p class="feature-desc-modern">
                    Ruh halinize ve zevkinize g√∂re size √∂zel kokteyl tarifleri
                    ve √∂nerileri ke≈üfedin.
                </p>
                <a href="{{ url_for('main.cocktails') }}" class="feature-link">
                    <span>Kokteylleri Ke≈üfet</span>
                    <i class="bi bi-arrow-right"></i>
                </a>
            </div>

            <!-- Feature 6: BAC Calculator -->
            <div class="feature-card-modern">
                <div class="feature-icon-modern gradient-red">
                    <i class="bi bi-calculator-fill"></i>
                    <div class="icon-glow"></div>
                </div>
                <h3 class="feature-title-modern">Promil Hesaplayƒ±cƒ±</h3>
                <p class="feature-desc-modern">
                    Kan alkol seviyenizi hesaplayƒ±n ve sorumlu t√ºketim i√ßin
                    bilimsel √∂neriler alƒ±n.
                </p>
                <a href="{{ url_for('main.bac_calculator') }}" class="feature-link">
                    <span>Hesapla</span>
                    <i class="bi bi-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Trending Pairings Section -->
{% if trending_pairings %}
<section class="trending-pairings-section">
    <div class="container">
        <div class="section-header-modern text-center mb-5">
            <div class="section-badge">
                <i class="bi bi-fire"></i>
                <span>Trendler</span>
            </div>
            <h2 class="section-title-modern">Pop√ºler <span class="gradient-text">E≈üle≈ütirmeler</span></h2>
            <p class="section-subtitle-modern">
                Topluluƒüumuzun en √ßok sevdiƒüi ve en y√ºksek puanlƒ± kombinasyonlar
            </p>
        </div>

        <div class="row g-4">
            {% for pairing in trending_pairings[:3] %}
            <div class="col-lg-4">
                <div class="trending-pairing-card">
                    <div class="trending-rank">#{{ loop.index }}</div>
                    <div class="pairing-content">
                        <div class="pairing-items">
                            <div class="pairing-food">
                                <span class="pairing-name">{{ pairing.food.name }}</span>
                            </div>
                            <div class="pairing-connector">
                                <i class="bi bi-plus-circle-fill"></i>
                            </div>
                            <div class="pairing-alcohol">
                                <span class="pairing-name">{{ pairing.alcohol.name }}</span>
                            </div>
                        </div>

                        <div class="pairing-metrics">
                            <div class="metric-item">
                                <div class="metric-value">{{ pairing.average_rating }}</div>
                                <div class="metric-label">Puan</div>
                            </div>
                            <div class="metric-divider"></div>
                            <div class="metric-item">
                                <div class="metric-value">{{ pairing.popularity_count }}</div>
                                <div class="metric-label">Oy</div>
                            </div>
                        </div>

                        <div class="pairing-progress">
                            <div class="pairing-progress-bar" style="width: {{ (pairing.average_rating / 5 * 100) }}%">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="text-center mt-5">
            <a href="{{ url_for('main.trending') }}" class="btn modern-btn-outline">
                <span>T√ºm Trendleri G√∂r√ºnt√ºle</span>
                <i class="bi bi-arrow-right"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="cta-card">
            <div class="cta-glow"></div>
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h2 class="cta-title">M√ºkemmel E≈üle≈ütirmeleri Ke≈üfetmeye Hazƒ±r mƒ±sƒ±nƒ±z?</h2>
                    <p class="cta-subtitle">
                        AI'mƒ±za g√ºvenen binlerce yemek severin deneyimine katƒ±lƒ±n ve
                        her √∂ƒü√ºn√ºn√ºz√º √∂zel bir deneyime d√∂n√º≈üt√ºr√ºn.
                    </p>
                </div>
                <div class="col-lg-4 text-lg-end">
                    <a href="{{ url_for('main.recommend') }}" class="btn modern-btn-cta">
                        <i class="bi bi-rocket-takeoff-fill"></i>
                        <span>Ke≈üfetmeye Ba≈üla</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // Counter Animation
    document.addEventListener('DOMContentLoaded', function () {
        const counters = document.querySelectorAll('[data-animate="counter"]');

        const animateCounter = (element) => {
            const numberEl = element.querySelector('.stat-number');
            const target = parseInt(numberEl.dataset.target);
            const suffix = numberEl.dataset.suffix || '';
            const duration = 2000;
            const start = 0;
            const startTime = performance.now();

            const updateCounter = (currentTime) => {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const current = Math.floor(easeOutQuart * (target - start) + start);

                numberEl.textContent = current + suffix;

                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                } else {
                    numberEl.textContent = target + suffix;
                }
            };

            requestAnimationFrame(updateCounter);
        };

        // Intersection Observer for counters
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounter(entry.target);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        counters.forEach(counter => observer.observe(counter));

        // Animate pairing progress bars
        const pairingBars = document.querySelectorAll('.pairing-progress-bar');
        const barObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const width = entry.target.style.width;
                    entry.target.style.width = '0%';
                    setTimeout(() => {
                        entry.target.style.width = width;
                    }, 300);
                    barObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        pairingBars.forEach(bar => barObserver.observe(bar));
    });
</script>
{% endblock %}